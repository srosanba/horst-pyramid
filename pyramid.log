1                                                          The SAS System                          11:32 Wednesday, January 10, 2018

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M4) 
      Licensed to RHO INCORPORATED NODE 1-4, Site 70170299.
NOTE: This session is executing on the X64_SR12R2  platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.2
      SAS/IML 14.2

NOTE: Additional host information:

 X64_SR12R2 WIN 6.3.9600  Server

NOTE: SAS initialization used:
      real time           0.07 seconds
      cpu time            0.10 seconds
      
NOTE: Libref SASDATA successfully assigned from logical server.
NOTE: Libref STPSAMP successfully assigned from logical server.
NOTE: Libref SASTST94 successfully assigned from logical server.
NOTE: Libref SASTST94 refers to the same physical library as SASHELP.

NOTE: AUTOEXEC processing beginning; file is \\drive_i\SAS94GridConfig\Lev1\SASAppPGRD94\appserver_autoexec.sas.


NOTE: AUTOEXEC processing completed.

1          options mprint;
2          
3          %let path = H:\GitHub\srosanba\pyramid;
4          
5          
6          %macro pyramid(goal=);
7          
8             proc format;
9                value pyr10d
10                  1 = "9"
11                  2 = "10a"
12                  3 = "10b"
13                  4 = "10b"
14                  5 = "10d"
15                  ;
16               value pyr11a
17                  1 = "10a"
18                  2 = "10b"
19                  3 = "10c"
20                  4 = "10d"
21                  5 = "11a"
22                  ;
23               value pyr11b
24                  1 = "10b"
25                  2 = "10c"
26                  3 = "10d"
27                  4 = "11a"
28                  5 = "11b"
2                                                          The SAS System                          11:32 Wednesday, January 10, 2018

29                  ;
30               value pyr11c
31                  1 = "10c"
32                  2 = "10d"
33                  3 = "11a"
34                  4 = "11b"
35                  5 = "11c"
36                  ;
37               value pyr11d
38                  1 = "10d"
39                  2 = "11a"
40                  3 = "11b"
41                  4 = "11c"
42                  5 = "11d"
43                  ;
44               value pyr12a
45                  1 = "11a"
46                  2 = "11b"
47                  3 = "11c"
48                  4 = "11d"
49                  5 = "12a"
50                  ;
51            run;
52         
53         
54            *--- generate pyramid outline ---;
55            data outline;
56               y = 1;
57               do xo = -7.5 to 7.5;
58                  output;
59               end;
60               y = 2;
61               do xo = -3.5 to 3.5;
62                  output;
63               end;
64               y = 3;
65               do xo = -1.5 to 1.5;
66                  output;
67               end;
68               y = 4;
69               do xo = -0.5 to 0.5;
70                  output;
71               end;
72               y = 5;
73               xo = 0;
74               output;
75               format y pyr&goal..;
76            run;
77         
78         
79            *--- import tick list ---;
80            proc import
81                  datafile="&path/ticks.csv"
82                  out=tickimp
83                  dbms=csv
84                  replace
85                  ;
86            run;
3                                                          The SAS System                          11:32 Wednesday, January 10, 2018

87         
88         
89            *-- count ticks at each grade ---;
90            proc sql;
91               create   table grades as
92               select   distinct y
93               from     outline
94               ;
95               create   table tickplot0 as
96               select   y
97               from     tickimp as tl
98                        left join grades as g
99                        on tl.grade = put(g.y,pyr&goal..)
100              order by y
101              ;
102              create   table tickplot1 as
103              select   y, count(*) as count
104              from     tickplot0
105              group by y
106              ;
107           quit;
108        
109        
110           *--- place ticks over outline ---;
111           data tickplot2;
112              set tickplot1;
113              if mod(count,2) = 0 then do;
114                 start = -1*count/2 + 0.5;
115                 end = -1*start;
116              end;
117              else if mod(count,2) = 1 then do;
118                 start = -1*count/2;
119                 end = -1*start - 1;
120              end;
121              do xt = start to end;
122                 output;
123              end;
124              if y = 5 then
125                 put "W" "ARNING: you have accomplished your goal!!!";
126           run;
127        
128        
129           *--- thin over-climbed grades ---;
130           data tickplot3;
131              set tickplot2;
132              if missing(y) then
133                 delete;
134              else if y = 1 and (xt < -7.5 or 7.5 < xt) then
135                 delete;
136              else if y = 2 and (xt < -3.5 or 3.5 < xt) then
137                 delete;
138              else if y = 3 and (xt < -1.5 or 1.5 < xt) then
139                 delete;
140              else if y = 4 and (xt < -0.5 or 0.5 < xt) then
141                 delete;
142              else if y = 5 and (xt < -0.0 or 0.0 < xt) then
143                 delete;
144           run;
4                                                          The SAS System                          11:32 Wednesday, January 10, 2018

145        
146        
147           *--- plot outline and ticks ---;
148           data plotdata;
149              set outline tickplot3;
150              if y = 1 then delete;
151           run;
152        
153           ods graphics / reset=all width=6in height=3in;
154           ods listing gpath = "&path";
155           ods graphics / imagename = "pyr&goal";
156        
157           proc sgplot data=plotdata noautolegend;
158              scatter x=xo y=y / markerattrs=(symbol=square size=50);
159              scatter x=xt y=y / markerattrs=(symbol=squarefilled size=40 color=green);
160              yaxis display=(nolabel) integer;
161              xaxis display=none;
162           run;
163        
164        %mend pyramid;
165        
166        ods pdf file="&path/pyramids.pdf" startpage=never;
NOTE: Writing ODS PDF output to DISK destination "H:\GitHub\srosanba\pyramid\pyramids.pdf", printer "PDF".
167        %pyramid(goal=10d)
MPRINT(PYRAMID):   proc format;
MPRINT(PYRAMID):   value pyr10d 1 = "9" 2 = "10a" 3 = "10b" 4 = "10b" 5 = "10d" ;
NOTE: Format PYR10D has been output.
MPRINT(PYRAMID):   value pyr11a 1 = "10a" 2 = "10b" 3 = "10c" 4 = "10d" 5 = "11a" ;
NOTE: Format PYR11A has been output.
MPRINT(PYRAMID):   value pyr11b 1 = "10b" 2 = "10c" 3 = "10d" 4 = "11a" 5 = "11b" ;
NOTE: Format PYR11B has been output.
MPRINT(PYRAMID):   value pyr11c 1 = "10c" 2 = "10d" 3 = "11a" 4 = "11b" 5 = "11c" ;
NOTE: Format PYR11C has been output.
MPRINT(PYRAMID):   value pyr11d 1 = "10d" 2 = "11a" 3 = "11b" 4 = "11c" 5 = "11d" ;
NOTE: Format PYR11D has been output.
MPRINT(PYRAMID):   value pyr12a 1 = "11a" 2 = "11b" 3 = "11c" 4 = "11d" 5 = "12a" ;
NOTE: Format PYR12A has been output.
MPRINT(PYRAMID):   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- generate pyramid outline ---;
MPRINT(PYRAMID):   data outline;
MPRINT(PYRAMID):   y = 1;
MPRINT(PYRAMID):   do xo = -7.5 to 7.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 2;
MPRINT(PYRAMID):   do xo = -3.5 to 3.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 3;
MPRINT(PYRAMID):   do xo = -1.5 to 1.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
5                                                          The SAS System                          11:32 Wednesday, January 10, 2018

MPRINT(PYRAMID):   y = 4;
MPRINT(PYRAMID):   do xo = -0.5 to 0.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 5;
MPRINT(PYRAMID):   xo = 0;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   format y pyr10d.;
MPRINT(PYRAMID):   run;

NOTE: The data set WORK.OUTLINE has 31 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- import tick list ---;
MPRINT(PYRAMID):   proc import datafile="H:\GitHub\srosanba\pyramid/ticks.csv" out=tickimp dbms=csv replace ;
MPRINT(PYRAMID):   ADLM;
MPRINT(PYRAMID):   run;

NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to 
WORK.PARMS.PARMS.SLIST.
168         /**********************************************************************
169         *   PRODUCT:   SAS
170         *   VERSION:   9.4
171         *   CREATOR:   External File Interface
172         *   DATE:      10JAN18
173         *   DESC:      Generated SAS Datastep Code
174         *   TEMPLATE SOURCE:  (None Specified.)
175         ***********************************************************************/
176            data WORK.TICKIMP    ;
MPRINT(PYRAMID):   data WORK.TICKIMP ;
177            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
178            infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
MPRINT(PYRAMID):   infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
179               informat date yymmdd10. ;
MPRINT(PYRAMID):   informat date yymmdd10. ;
180               informat grade $3. ;
MPRINT(PYRAMID):   informat grade $3. ;
181               format date yymmdd10. ;
MPRINT(PYRAMID):   format date yymmdd10. ;
182               format grade $3. ;
MPRINT(PYRAMID):   format grade $3. ;
183            input
184                        date
185                        grade $
186            ;
MPRINT(PYRAMID):   input date grade $ ;
187            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
MPRINT(PYRAMID):   if _ERROR_ then call symputx('_EFIERR_',1);
188            run;
MPRINT(PYRAMID):   run;

NOTE: The infile 'H:\GitHub\srosanba\pyramid/ticks.csv' is:
      Filename=H:\GitHub\srosanba\pyramid\ticks.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=268,
      Last Modified=10Jan2018:09:42:53,
6                                                          The SAS System                          11:32 Wednesday, January 10, 2018

      Create Time=10Jan2018:09:42:53

NOTE: 16 records were read from the infile 'H:\GitHub\srosanba\pyramid/ticks.csv'.
      The minimum record length was 14.
      The maximum record length was 14.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

16 rows created in WORK.TICKIMP from H:\GitHub\srosanba\pyramid/ticks.csv.
  
  
  
NOTE: WORK.TICKIMP data set was successfully created.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      

MPRINT(PYRAMID):    ;
MPRINT(PYRAMID):   *-- count ticks at each grade ---;
MPRINT(PYRAMID):   proc sql;
MPRINT(PYRAMID):   create table grades as select distinct y from outline ;
NOTE: Table WORK.GRADES created, with 5 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot0 as select y from tickimp as tl left join grades as g on tl.grade = put(g.y,pyr10d.) order 
by y ;
NOTE: Table WORK.TICKPLOT0 created, with 24 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot1 as select y, count(*) as count from tickplot0 group by y ;
NOTE: Table WORK.TICKPLOT1 created, with 4 rows and 2 columns.

MPRINT(PYRAMID):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- place ticks over outline ---;
MPRINT(PYRAMID):   data tickplot2;
MPRINT(PYRAMID):   set tickplot1;
MPRINT(PYRAMID):   if mod(count,2) = 0 then do;
MPRINT(PYRAMID):   start = -1*count/2 + 0.5;
MPRINT(PYRAMID):   end = -1*start;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   else if mod(count,2) = 1 then do;
MPRINT(PYRAMID):   start = -1*count/2;
MPRINT(PYRAMID):   end = -1*start - 1;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   do xt = start to end;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   if y = 5 then put "W" "ARNING: you have accomplished your goal!!!";
MPRINT(PYRAMID):   run;

7                                                          The SAS System                          11:32 Wednesday, January 10, 2018

NOTE: There were 4 observations read from the data set WORK.TICKPLOT1.
NOTE: The data set WORK.TICKPLOT2 has 24 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- thin over-climbed grades ---;
MPRINT(PYRAMID):   data tickplot3;
MPRINT(PYRAMID):   set tickplot2;
MPRINT(PYRAMID):   if missing(y) then delete;
MPRINT(PYRAMID):   else if y = 1 and (xt < -7.5 or 7.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 2 and (xt < -3.5 or 3.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 3 and (xt < -1.5 or 1.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 4 and (xt < -0.5 or 0.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 5 and (xt < -0.0 or 0.0 < xt) then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 24 observations read from the data set WORK.TICKPLOT2.
NOTE: The data set WORK.TICKPLOT3 has 8 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- plot outline and ticks ---;
MPRINT(PYRAMID):   data plotdata;
MPRINT(PYRAMID):   set outline tickplot3;
MPRINT(PYRAMID):   if y = 1 then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 31 observations read from the data set WORK.OUTLINE.
NOTE: There were 8 observations read from the data set WORK.TICKPLOT3.
NOTE: The data set WORK.PLOTDATA has 23 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   ods graphics / reset=all width=6in height=3in;
MPRINT(PYRAMID):   ods listing gpath = "H:\GitHub\srosanba\pyramid";
MPRINT(PYRAMID):   ods graphics / imagename = "pyr10d";
MPRINT(PYRAMID):   proc sgplot data=plotdata noautolegend;
MPRINT(PYRAMID):   scatter x=xo y=y / markerattrs=(symbol=square size=50);
MPRINT(PYRAMID):   scatter x=xt y=y / markerattrs=(symbol=squarefilled size=40 color=green);
MPRINT(PYRAMID):   yaxis display=(nolabel) integer;
MPRINT(PYRAMID):   xaxis display=none;
MPRINT(PYRAMID):   run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           1.79 seconds
      cpu time            0.06 seconds
      
NOTE: Listing image output written to H:\GitHub\srosanba\pyramid\pyr10d.png.
NOTE: There were 23 observations read from the data set WORK.PLOTDATA.

189        %pyramid(goal=11a)
MPRINT(PYRAMID):   proc format;
8                                                          The SAS System                          11:32 Wednesday, January 10, 2018

MPRINT(PYRAMID):   value pyr10d 1 = "9" 2 = "10a" 3 = "10b" 4 = "10b" 5 = "10d" ;
NOTE: Format PYR10D is already on the library WORK.FORMATS.
NOTE: Format PYR10D has been output.
MPRINT(PYRAMID):   value pyr11a 1 = "10a" 2 = "10b" 3 = "10c" 4 = "10d" 5 = "11a" ;
NOTE: Format PYR11A is already on the library WORK.FORMATS.
NOTE: Format PYR11A has been output.
MPRINT(PYRAMID):   value pyr11b 1 = "10b" 2 = "10c" 3 = "10d" 4 = "11a" 5 = "11b" ;
NOTE: Format PYR11B is already on the library WORK.FORMATS.
NOTE: Format PYR11B has been output.
MPRINT(PYRAMID):   value pyr11c 1 = "10c" 2 = "10d" 3 = "11a" 4 = "11b" 5 = "11c" ;
NOTE: Format PYR11C is already on the library WORK.FORMATS.
NOTE: Format PYR11C has been output.
MPRINT(PYRAMID):   value pyr11d 1 = "10d" 2 = "11a" 3 = "11b" 4 = "11c" 5 = "11d" ;
NOTE: Format PYR11D is already on the library WORK.FORMATS.
NOTE: Format PYR11D has been output.
MPRINT(PYRAMID):   value pyr12a 1 = "11a" 2 = "11b" 3 = "11c" 4 = "11d" 5 = "12a" ;
NOTE: Format PYR12A is already on the library WORK.FORMATS.
NOTE: Format PYR12A has been output.
MPRINT(PYRAMID):   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- generate pyramid outline ---;
MPRINT(PYRAMID):   data outline;
MPRINT(PYRAMID):   y = 1;
MPRINT(PYRAMID):   do xo = -7.5 to 7.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 2;
MPRINT(PYRAMID):   do xo = -3.5 to 3.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 3;
MPRINT(PYRAMID):   do xo = -1.5 to 1.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 4;
MPRINT(PYRAMID):   do xo = -0.5 to 0.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 5;
MPRINT(PYRAMID):   xo = 0;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   format y pyr11a.;
MPRINT(PYRAMID):   run;

NOTE: The data set WORK.OUTLINE has 31 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- import tick list ---;
MPRINT(PYRAMID):   proc import datafile="H:\GitHub\srosanba\pyramid/ticks.csv" out=tickimp dbms=csv replace ;
MPRINT(PYRAMID):   ADLM;
9                                                          The SAS System                          11:32 Wednesday, January 10, 2018

MPRINT(PYRAMID):   run;

NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to 
WORK.PARMS.PARMS.SLIST.
190         /**********************************************************************
191         *   PRODUCT:   SAS
192         *   VERSION:   9.4
193         *   CREATOR:   External File Interface
194         *   DATE:      10JAN18
195         *   DESC:      Generated SAS Datastep Code
196         *   TEMPLATE SOURCE:  (None Specified.)
197         ***********************************************************************/
198            data WORK.TICKIMP    ;
MPRINT(PYRAMID):   data WORK.TICKIMP ;
199            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
200            infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
MPRINT(PYRAMID):   infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
201               informat date yymmdd10. ;
MPRINT(PYRAMID):   informat date yymmdd10. ;
202               informat grade $3. ;
MPRINT(PYRAMID):   informat grade $3. ;
203               format date yymmdd10. ;
MPRINT(PYRAMID):   format date yymmdd10. ;
204               format grade $3. ;
MPRINT(PYRAMID):   format grade $3. ;
205            input
206                        date
207                        grade $
208            ;
MPRINT(PYRAMID):   input date grade $ ;
209            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
MPRINT(PYRAMID):   if _ERROR_ then call symputx('_EFIERR_',1);
210            run;
MPRINT(PYRAMID):   run;

NOTE: The infile 'H:\GitHub\srosanba\pyramid/ticks.csv' is:
      Filename=H:\GitHub\srosanba\pyramid\ticks.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=268,
      Last Modified=10Jan2018:09:42:53,
      Create Time=10Jan2018:09:42:53

NOTE: 16 records were read from the infile 'H:\GitHub\srosanba\pyramid/ticks.csv'.
      The minimum record length was 14.
      The maximum record length was 14.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

16 rows created in WORK.TICKIMP from H:\GitHub\srosanba\pyramid/ticks.csv.
  
  
  
NOTE: WORK.TICKIMP data set was successfully created.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.06 seconds
10                                                         The SAS System                          11:32 Wednesday, January 10, 2018

      cpu time            0.04 seconds
      

MPRINT(PYRAMID):    ;
MPRINT(PYRAMID):   *-- count ticks at each grade ---;
MPRINT(PYRAMID):   proc sql;
MPRINT(PYRAMID):   create table grades as select distinct y from outline ;
NOTE: Table WORK.GRADES created, with 5 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot0 as select y from tickimp as tl left join grades as g on tl.grade = put(g.y,pyr11a.) order 
by y ;
NOTE: Table WORK.TICKPLOT0 created, with 16 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot1 as select y, count(*) as count from tickplot0 group by y ;
NOTE: Table WORK.TICKPLOT1 created, with 3 rows and 2 columns.

MPRINT(PYRAMID):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.03 seconds
      

MPRINT(PYRAMID):   *--- place ticks over outline ---;
MPRINT(PYRAMID):   data tickplot2;
MPRINT(PYRAMID):   set tickplot1;
MPRINT(PYRAMID):   if mod(count,2) = 0 then do;
MPRINT(PYRAMID):   start = -1*count/2 + 0.5;
MPRINT(PYRAMID):   end = -1*start;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   else if mod(count,2) = 1 then do;
MPRINT(PYRAMID):   start = -1*count/2;
MPRINT(PYRAMID):   end = -1*start - 1;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   do xt = start to end;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   if y = 5 then put "W" "ARNING: you have accomplished your goal!!!";
MPRINT(PYRAMID):   run;

NOTE: There were 3 observations read from the data set WORK.TICKPLOT1.
NOTE: The data set WORK.TICKPLOT2 has 16 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- thin over-climbed grades ---;
MPRINT(PYRAMID):   data tickplot3;
MPRINT(PYRAMID):   set tickplot2;
MPRINT(PYRAMID):   if missing(y) then delete;
MPRINT(PYRAMID):   else if y = 1 and (xt < -7.5 or 7.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 2 and (xt < -3.5 or 3.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 3 and (xt < -1.5 or 1.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 4 and (xt < -0.5 or 0.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 5 and (xt < -0.0 or 0.0 < xt) then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 16 observations read from the data set WORK.TICKPLOT2.
11                                                         The SAS System                          11:32 Wednesday, January 10, 2018

NOTE: The data set WORK.TICKPLOT3 has 14 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- plot outline and ticks ---;
MPRINT(PYRAMID):   data plotdata;
MPRINT(PYRAMID):   set outline tickplot3;
MPRINT(PYRAMID):   if y = 1 then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 31 observations read from the data set WORK.OUTLINE.
NOTE: There were 14 observations read from the data set WORK.TICKPLOT3.
NOTE: The data set WORK.PLOTDATA has 27 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   ods graphics / reset=all width=6in height=3in;
MPRINT(PYRAMID):   ods listing gpath = "H:\GitHub\srosanba\pyramid";
MPRINT(PYRAMID):   ods graphics / imagename = "pyr11a";
MPRINT(PYRAMID):   proc sgplot data=plotdata noautolegend;
MPRINT(PYRAMID):   scatter x=xo y=y / markerattrs=(symbol=square size=50);
MPRINT(PYRAMID):   scatter x=xt y=y / markerattrs=(symbol=squarefilled size=40 color=green);
MPRINT(PYRAMID):   yaxis display=(nolabel) integer;
MPRINT(PYRAMID):   xaxis display=none;
MPRINT(PYRAMID):   run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.25 seconds
      cpu time            0.06 seconds
      
NOTE: Listing image output written to H:\GitHub\srosanba\pyramid\pyr11a.png.
NOTE: There were 27 observations read from the data set WORK.PLOTDATA.

211        %pyramid(goal=11b)
MPRINT(PYRAMID):   proc format;
MPRINT(PYRAMID):   value pyr10d 1 = "9" 2 = "10a" 3 = "10b" 4 = "10b" 5 = "10d" ;
NOTE: Format PYR10D is already on the library WORK.FORMATS.
NOTE: Format PYR10D has been output.
MPRINT(PYRAMID):   value pyr11a 1 = "10a" 2 = "10b" 3 = "10c" 4 = "10d" 5 = "11a" ;
NOTE: Format PYR11A is already on the library WORK.FORMATS.
NOTE: Format PYR11A has been output.
MPRINT(PYRAMID):   value pyr11b 1 = "10b" 2 = "10c" 3 = "10d" 4 = "11a" 5 = "11b" ;
NOTE: Format PYR11B is already on the library WORK.FORMATS.
NOTE: Format PYR11B has been output.
MPRINT(PYRAMID):   value pyr11c 1 = "10c" 2 = "10d" 3 = "11a" 4 = "11b" 5 = "11c" ;
NOTE: Format PYR11C is already on the library WORK.FORMATS.
NOTE: Format PYR11C has been output.
MPRINT(PYRAMID):   value pyr11d 1 = "10d" 2 = "11a" 3 = "11b" 4 = "11c" 5 = "11d" ;
NOTE: Format PYR11D is already on the library WORK.FORMATS.
NOTE: Format PYR11D has been output.
MPRINT(PYRAMID):   value pyr12a 1 = "11a" 2 = "11b" 3 = "11c" 4 = "11d" 5 = "12a" ;
NOTE: Format PYR12A is already on the library WORK.FORMATS.
NOTE: Format PYR12A has been output.
MPRINT(PYRAMID):   run;
12                                                         The SAS System                          11:32 Wednesday, January 10, 2018


NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- generate pyramid outline ---;
MPRINT(PYRAMID):   data outline;
MPRINT(PYRAMID):   y = 1;
MPRINT(PYRAMID):   do xo = -7.5 to 7.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 2;
MPRINT(PYRAMID):   do xo = -3.5 to 3.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 3;
MPRINT(PYRAMID):   do xo = -1.5 to 1.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 4;
MPRINT(PYRAMID):   do xo = -0.5 to 0.5;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   y = 5;
MPRINT(PYRAMID):   xo = 0;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   format y pyr11b.;
MPRINT(PYRAMID):   run;

NOTE: The data set WORK.OUTLINE has 31 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- import tick list ---;
MPRINT(PYRAMID):   proc import datafile="H:\GitHub\srosanba\pyramid/ticks.csv" out=tickimp dbms=csv replace ;
MPRINT(PYRAMID):   ADLM;
MPRINT(PYRAMID):   run;

NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to 
WORK.PARMS.PARMS.SLIST.
212         /**********************************************************************
213         *   PRODUCT:   SAS
214         *   VERSION:   9.4
215         *   CREATOR:   External File Interface
216         *   DATE:      10JAN18
217         *   DESC:      Generated SAS Datastep Code
218         *   TEMPLATE SOURCE:  (None Specified.)
219         ***********************************************************************/
220            data WORK.TICKIMP    ;
MPRINT(PYRAMID):   data WORK.TICKIMP ;
221            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
222            infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
MPRINT(PYRAMID):   infile 'H:\GitHub\srosanba\pyramid/ticks.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
223               informat date yymmdd10. ;
MPRINT(PYRAMID):   informat date yymmdd10. ;
13                                                         The SAS System                          11:32 Wednesday, January 10, 2018

224               informat grade $3. ;
MPRINT(PYRAMID):   informat grade $3. ;
225               format date yymmdd10. ;
MPRINT(PYRAMID):   format date yymmdd10. ;
226               format grade $3. ;
MPRINT(PYRAMID):   format grade $3. ;
227            input
228                        date
229                        grade $
230            ;
MPRINT(PYRAMID):   input date grade $ ;
231            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
MPRINT(PYRAMID):   if _ERROR_ then call symputx('_EFIERR_',1);
232            run;
MPRINT(PYRAMID):   run;

NOTE: The infile 'H:\GitHub\srosanba\pyramid/ticks.csv' is:
      Filename=H:\GitHub\srosanba\pyramid\ticks.csv,
      RECFM=V,LRECL=32767,File Size (bytes)=268,
      Last Modified=10Jan2018:09:42:53,
      Create Time=10Jan2018:09:42:53

NOTE: 16 records were read from the infile 'H:\GitHub\srosanba\pyramid/ticks.csv'.
      The minimum record length was 14.
      The maximum record length was 14.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

16 rows created in WORK.TICKIMP from H:\GitHub\srosanba\pyramid/ticks.csv.
  
  
  
NOTE: WORK.TICKIMP data set was successfully created.
NOTE: The data set WORK.TICKIMP has 16 observations and 2 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      

MPRINT(PYRAMID):    ;
MPRINT(PYRAMID):   *-- count ticks at each grade ---;
MPRINT(PYRAMID):   proc sql;
MPRINT(PYRAMID):   create table grades as select distinct y from outline ;
NOTE: Table WORK.GRADES created, with 5 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot0 as select y from tickimp as tl left join grades as g on tl.grade = put(g.y,pyr11b.) order 
by y ;
NOTE: Table WORK.TICKPLOT0 created, with 16 rows and 1 columns.

MPRINT(PYRAMID):   create table tickplot1 as select y, count(*) as count from tickplot0 group by y ;
NOTE: Table WORK.TICKPLOT1 created, with 3 rows and 2 columns.

MPRINT(PYRAMID):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
14                                                         The SAS System                          11:32 Wednesday, January 10, 2018

      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- place ticks over outline ---;
MPRINT(PYRAMID):   data tickplot2;
MPRINT(PYRAMID):   set tickplot1;
MPRINT(PYRAMID):   if mod(count,2) = 0 then do;
MPRINT(PYRAMID):   start = -1*count/2 + 0.5;
MPRINT(PYRAMID):   end = -1*start;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   else if mod(count,2) = 1 then do;
MPRINT(PYRAMID):   start = -1*count/2;
MPRINT(PYRAMID):   end = -1*start - 1;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   do xt = start to end;
MPRINT(PYRAMID):   output;
MPRINT(PYRAMID):   end;
MPRINT(PYRAMID):   if y = 5 then put "W" "ARNING: you have accomplished your goal!!!";
MPRINT(PYRAMID):   run;

NOTE: There were 3 observations read from the data set WORK.TICKPLOT1.
NOTE: The data set WORK.TICKPLOT2 has 16 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(PYRAMID):   *--- thin over-climbed grades ---;
MPRINT(PYRAMID):   data tickplot3;
MPRINT(PYRAMID):   set tickplot2;
MPRINT(PYRAMID):   if missing(y) then delete;
MPRINT(PYRAMID):   else if y = 1 and (xt < -7.5 or 7.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 2 and (xt < -3.5 or 3.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 3 and (xt < -1.5 or 1.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 4 and (xt < -0.5 or 0.5 < xt) then delete;
MPRINT(PYRAMID):   else if y = 5 and (xt < -0.0 or 0.0 < xt) then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 16 observations read from the data set WORK.TICKPLOT2.
NOTE: The data set WORK.TICKPLOT3 has 14 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(PYRAMID):   *--- plot outline and ticks ---;
MPRINT(PYRAMID):   data plotdata;
MPRINT(PYRAMID):   set outline tickplot3;
MPRINT(PYRAMID):   if y = 1 then delete;
MPRINT(PYRAMID):   run;

NOTE: There were 31 observations read from the data set WORK.OUTLINE.
NOTE: There were 14 observations read from the data set WORK.TICKPLOT3.
NOTE: The data set WORK.PLOTDATA has 21 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
15                                                         The SAS System                          11:32 Wednesday, January 10, 2018


MPRINT(PYRAMID):   ods graphics / reset=all width=6in height=3in;
MPRINT(PYRAMID):   ods listing gpath = "H:\GitHub\srosanba\pyramid";
MPRINT(PYRAMID):   ods graphics / imagename = "pyr11b";
MPRINT(PYRAMID):   proc sgplot data=plotdata noautolegend;
MPRINT(PYRAMID):   scatter x=xo y=y / markerattrs=(symbol=square size=50);
MPRINT(PYRAMID):   scatter x=xt y=y / markerattrs=(symbol=squarefilled size=40 color=green);
MPRINT(PYRAMID):   yaxis display=(nolabel) integer;
MPRINT(PYRAMID):   xaxis display=none;
MPRINT(PYRAMID):   run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.26 seconds
      cpu time            0.04 seconds
      
NOTE: Listing image output written to H:\GitHub\srosanba\pyramid\pyr11b.png.
NOTE: There were 21 observations read from the data set WORK.PLOTDATA.

233        ods pdf close;
NOTE: ODS PDF printed 1 page to H:\GitHub\srosanba\pyramid\pyramids.pdf.
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           2.96 seconds
      cpu time            0.78 seconds
      
